{"remainingRequest":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/babel-loader/lib/index.js!/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/edwin/Pictures/FYP_FRONT_END/rit-master/src/modules/Authentication/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/src/modules/Authentication/Login.vue","mtime":1651515714651},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/babel.config.js","mtime":1649961924000},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/cache-loader/dist/cjs.js","mtime":1651266680411},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/babel-loader/lib/index.js","mtime":1651266681523},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/cache-loader/dist/cjs.js","mtime":1651266680411},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/vue-loader/lib/index.js","mtime":1651266681819}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2Vkd2luL1BpY3R1cmVzL0ZZUF9GUk9OVF9FTkQvcml0LW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsIGZyb20gIi9ob21lL2Vkd2luL1BpY3R1cmVzL0ZZUF9GUk9OVF9FTkQvcml0LW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdGFnZ2VkVGVtcGxhdGVMaXRlcmFsLmpzIjsKCnZhciBfdGVtcGxhdGVPYmplY3Q7CgovLwovLwovLwovLwppbXBvcnQgTG9naW5fUGFnZSBmcm9tICIuL0xvZ2luQ29udGVudC52dWUiOyAvLyBjcmVhdGluZyBtdXRhdGlvbiBoZXJlCgppbXBvcnQgZ3FsIGZyb20gImdyYXBocWwtdGFnIjsKdmFyIExPR0lOX1FVRVJZID0gZ3FsKF90ZW1wbGF0ZU9iamVjdCB8fCAoX3RlbXBsYXRlT2JqZWN0ID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICBtdXRhdGlvbiAoJHVzZXJuYW1lOiBTdHJpbmchLCAkcGFzc3dvcmQ6IFN0cmluZyEpIHtcbiAgICB0b2tlbkF1dGgodXNlcm5hbWU6ICR1c2VybmFtZSwgcGFzc3dvcmQ6ICRwYXNzd29yZCkge1xuICAgICAgdG9rZW5cbiAgICAgIHN1Y2Nlc3NcbiAgICAgIGVycm9yc1xuICAgIH1cbiAgfVxuIl0pKSk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGNvbXBvbmVudHM6IHsKICAgIExvZ2luX1BhZ2U6IExvZ2luX1BhZ2UKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcnM6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbG9naW5IYW5kbGVyOiBmdW5jdGlvbiBsb2dpbkhhbmRsZXIoZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBMT0dJTl9RVUVSWSwKICAgICAgICB2YXJpYWJsZXM6IGRhdGEsCiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoY2FjaGUsIF9yZWYpIHsKICAgICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CgogICAgICAgICAgaWYgKCFkYXRhLnRva2VuQXV0aC5lcnJvcnMpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgZGF0YS50b2tlbkF1dGgudG9rZW4pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGVycm9ycyA9IFtdOwoKICAgICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGRhdGEudG9rZW5BdXRoLmVycm9ycy5ub25GaWVsZEVycm9ycyksCiAgICAgICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgIHZhciBlID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMuZXJyb3JzID0gZXJyb3JzOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;AAKA,4C,CAEA;;AACA;AAEA;AAUA;EACAA,aADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACA;MACAC;IADA;EAGA,CATA;EAUAC;IACAC,YADA,wBACAH,IADA,EACA;MAAA;;MACA;MACA;QACAI,qBADA;QAEAC,eAFA;QAGAC;UAAA;UACAC;;UACA;YACAC;UACA,CAFA,MAEA;YACA;;YADA,2CAEAR,oCAFA;YAAA;;YAAA;cAEA;gBAAA;gBACAC;cACA;YAJA;cAAA;YAAA;cAAA;YAAA;;YAKA;UACA;QACA;MAdA;IAgBA;EAnBA;AAVA","names":["name","components","Login_Page","data","errors","methods","loginHandler","mutation","variables","update","console","localStorage"],"sourceRoot":"src/modules/Authentication","sources":["Login.vue"],"sourcesContent":["<template>\n  <Login_Page @login-handler=\"loginHandler\" />\n</template>\n\n<script>\nimport Login_Page from \"./LoginContent.vue\";\n\n// creating mutation here\nimport gql from \"graphql-tag\";\n\nconst LOGIN_QUERY = gql`\n  mutation ($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n      token\n      success\n      errors\n    }\n  }\n`;\n\nexport default {\n  name: \"Login\",\n  components: {\n    Login_Page,\n  },\n  data: () => {\n    return {\n      errors: [],\n    };\n  },\n  methods: {\n    loginHandler(data) {\n      // console.log(data);\n      this.$apollo.mutate({\n        mutation: LOGIN_QUERY,\n        variables: data,\n        update: (cache, { data }) => {\n          console.log(data);\n          if (!data.tokenAuth.errors) {\n            localStorage.setItem(\"token\", data.tokenAuth.token);\n          } else {\n            let errors = [];\n            for (let e of data.tokenAuth.errors.nonFieldErrors) {\n              errors.push(e);\n            }\n            this.errors = errors;\n          }\n        },\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n.no-uppercase {\n  text-transform: unset !important;\n}\n</style>\n"]}]}