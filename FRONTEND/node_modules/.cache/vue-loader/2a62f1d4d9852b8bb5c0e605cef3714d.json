{"remainingRequest":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/edwin/Pictures/FYP_FRONT_END/rit-master/src/modules/Authentication/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/src/modules/Authentication/Login.vue","mtime":1651926598197},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/cache-loader/dist/cjs.js","mtime":1651266680411},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/babel-loader/lib/index.js","mtime":1651266681523},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/cache-loader/dist/cjs.js","mtime":1651266680411},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/vue-loader/lib/index.js","mtime":1651266681819}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2dpbl9QYWdlIGZyb20gIi4vTG9naW5Db250ZW50LnZ1ZSI7CgovLyBjcmVhdGluZyBtdXRhdGlvbiBoZXJlCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwoKY29uc3QgTE9HSU5fUVVFUlkgPSBncWxgCiAgbXV0YXRpb24gKCRlbWFpbDogU3RyaW5nLCAkcGFzc3dvcmQ6IFN0cmluZyEpIHsKICAgIHRva2VuQXV0aChlbWFpbDogJGVtYWlsLCBwYXNzd29yZDogJHBhc3N3b3JkKSB7CiAgICAgIHRva2VuCiAgICAgIHN1Y2Nlc3MKICAgICAgZXJyb3JzCiAgICB9CiAgfQpgOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dpbiIsCiAgY29tcG9uZW50czogewogICAgTG9naW5fUGFnZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcnM6IFtdLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luSGFuZGxlcihkYXRhKSB7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBMT0dJTl9RVUVSWSwKICAgICAgICB2YXJpYWJsZXM6IGRhdGEsCiAgICAgICAgdXBkYXRlOiAoY2FjaGUsIHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgIGlmICghZGF0YS50b2tlbkF1dGguZXJyb3JzKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIGRhdGEudG9rZW5BdXRoLnRva2VuKTsKICAgICAgICAgICAgY29uc3QgVG9hc3QgPSB0aGlzLiRzd2FsLm1peGluKHsKICAgICAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgICB0aW1lclByb2dyZXNzQmFyOiB0cnVlLAogICAgICAgICAgICAgIGRpZE9wZW46ICh0b2FzdCkgPT4gewogICAgICAgICAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIHRoaXMuJHN3YWwuc3RvcFRpbWVyKTsKICAgICAgICAgICAgICAgIHRvYXN0LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCB0aGlzLiRzd2FsLnJlc3VtZVRpbWVyKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFRvYXN0LmZpcmUoewogICAgICAgICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICAgICAgICB0aXRsZTogIlNpZ25lZCBpbiBzdWNjZXNzZnVsbHkiLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxldCBlcnJvcnMgPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgZSBvZiBkYXRhLnRva2VuQXV0aC5lcnJvcnMubm9uRmllbGRFcnJvcnMpIHsKICAgICAgICAgICAgICBlcnJvcnMucHVzaChlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9yczsKICAgICAgICAgICAgY29uc3QgVG9hc3QgPSB0aGlzLiRzd2FsLm1peGluKHsKICAgICAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgICAgICB0aW1lclByb2dyZXNzQmFyOiB0cnVlLAogICAgICAgICAgICAgIGRpZE9wZW46ICh0b2FzdCkgPT4gewogICAgICAgICAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIHRoaXMuJHN3YWwuc3RvcFRpbWVyKTsKICAgICAgICAgICAgICAgIHRvYXN0LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCB0aGlzLiRzd2FsLnJlc3VtZVRpbWVyKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFRvYXN0LmZpcmUoewogICAgICAgICAgICAgIGljb246ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICB0aXRsZTogIkNyZWRlbnRpYWwgZGlkbid0IG1hdGNoISIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/modules/Authentication","sourcesContent":["<template>\n  <div>\n    <!-- <v-alert\n      v-for=\"err of errors\"\n      :key=\"err.code\"\n      border=\"bottom\"\n      color=\"red\"\n      dismissible\n      elevation=\"21\"\n      icon=\"mdi-alert-circle\"\n      type=\"error\"\n    >\n      {{ err.message }}\n    </v-alert> -->\n    <Login_Page @login-handler=\"loginHandler\" />\n  </div>\n</template>\n\n<script>\nimport Login_Page from \"./LoginContent.vue\";\n\n// creating mutation here\nimport gql from \"graphql-tag\";\n\nconst LOGIN_QUERY = gql`\n  mutation ($email: String, $password: String!) {\n    tokenAuth(email: $email, password: $password) {\n      token\n      success\n      errors\n    }\n  }\n`;\n\nexport default {\n  name: \"Login\",\n  components: {\n    Login_Page,\n  },\n  data() {\n    return {\n      errors: [],\n    };\n  },\n  methods: {\n    loginHandler(data) {\n      this.$apollo.mutate({\n        mutation: LOGIN_QUERY,\n        variables: data,\n        update: (cache, { data }) => {\n          console.log(data);\n          if (!data.tokenAuth.errors) {\n            localStorage.setItem(\"token\", data.tokenAuth.token);\n            const Toast = this.$swal.mixin({\n              toast: true,\n              position: \"top-end\",\n              showConfirmButton: false,\n              timer: 3000,\n              timerProgressBar: true,\n              didOpen: (toast) => {\n                toast.addEventListener(\"mouseenter\", this.$swal.stopTimer);\n                toast.addEventListener(\"mouseleave\", this.$swal.resumeTimer);\n              },\n            });\n\n            Toast.fire({\n              icon: \"success\",\n              title: \"Signed in successfully\",\n            });\n          } else {\n            let errors = [];\n            for (let e of data.tokenAuth.errors.nonFieldErrors) {\n              errors.push(e);\n            }\n            this.errors = errors;\n            const Toast = this.$swal.mixin({\n              toast: true,\n              position: \"top-end\",\n              showConfirmButton: false,\n              timer: 3000,\n              timerProgressBar: true,\n              didOpen: (toast) => {\n                toast.addEventListener(\"mouseenter\", this.$swal.stopTimer);\n                toast.addEventListener(\"mouseleave\", this.$swal.resumeTimer);\n              },\n            });\n\n            Toast.fire({\n              icon: \"warning\",\n              title: \"Credential didn't match!\",\n            });\n          }\n        },\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n.no-uppercase {\n  text-transform: unset !important;\n}\n</style>\n"]}]}