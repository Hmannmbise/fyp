{"remainingRequest":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/edwin/Pictures/FYP_FRONT_END/rit-master/src/modules/Authentication/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/src/modules/Authentication/Login.vue","mtime":1651515714651},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/cache-loader/dist/cjs.js","mtime":1651266680411},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/babel-loader/lib/index.js","mtime":1651266681523},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/cache-loader/dist/cjs.js","mtime":1651266680411},{"path":"/home/edwin/Pictures/FYP_FRONT_END/rit-master/node_modules/vue-loader/lib/index.js","mtime":1651266681819}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBMb2dpbl9QYWdlIGZyb20gIi4vTG9naW5Db250ZW50LnZ1ZSI7CgovLyBjcmVhdGluZyBtdXRhdGlvbiBoZXJlCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwoKY29uc3QgTE9HSU5fUVVFUlkgPSBncWxgCiAgbXV0YXRpb24gKCR1c2VybmFtZTogU3RyaW5nISwgJHBhc3N3b3JkOiBTdHJpbmchKSB7CiAgICB0b2tlbkF1dGgodXNlcm5hbWU6ICR1c2VybmFtZSwgcGFzc3dvcmQ6ICRwYXNzd29yZCkgewogICAgICB0b2tlbgogICAgICBzdWNjZXNzCiAgICAgIGVycm9ycwogICAgfQogIH0KYDsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGNvbXBvbmVudHM6IHsKICAgIExvZ2luX1BhZ2UsCiAgfSwKICBkYXRhOiAoKSA9PiB7CiAgICByZXR1cm4gewogICAgICBlcnJvcnM6IFtdLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luSGFuZGxlcihkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogTE9HSU5fUVVFUlksCiAgICAgICAgdmFyaWFibGVzOiBkYXRhLAogICAgICAgIHVwZGF0ZTogKGNhY2hlLCB7IGRhdGEgfSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICBpZiAoIWRhdGEudG9rZW5BdXRoLmVycm9ycykgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCBkYXRhLnRva2VuQXV0aC50b2tlbik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgZXJyb3JzID0gW107CiAgICAgICAgICAgIGZvciAobGV0IGUgb2YgZGF0YS50b2tlbkF1dGguZXJyb3JzLm5vbkZpZWxkRXJyb3JzKSB7CiAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;AAKA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/modules/Authentication","sourcesContent":["<template>\n  <Login_Page @login-handler=\"loginHandler\" />\n</template>\n\n<script>\nimport Login_Page from \"./LoginContent.vue\";\n\n// creating mutation here\nimport gql from \"graphql-tag\";\n\nconst LOGIN_QUERY = gql`\n  mutation ($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n      token\n      success\n      errors\n    }\n  }\n`;\n\nexport default {\n  name: \"Login\",\n  components: {\n    Login_Page,\n  },\n  data: () => {\n    return {\n      errors: [],\n    };\n  },\n  methods: {\n    loginHandler(data) {\n      // console.log(data);\n      this.$apollo.mutate({\n        mutation: LOGIN_QUERY,\n        variables: data,\n        update: (cache, { data }) => {\n          console.log(data);\n          if (!data.tokenAuth.errors) {\n            localStorage.setItem(\"token\", data.tokenAuth.token);\n          } else {\n            let errors = [];\n            for (let e of data.tokenAuth.errors.nonFieldErrors) {\n              errors.push(e);\n            }\n            this.errors = errors;\n          }\n        },\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n.no-uppercase {\n  text-transform: unset !important;\n}\n</style>\n"]}]}